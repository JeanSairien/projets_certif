<!DOCTYPE html>
<html>
<head>

	<meta charset="utf-8">
	<title>Spécification technique</title>

	<link rel="stylesheet" type="text/css" href="style.css">
</head>

<!--TODO mettre le code de chaques appels ajax-->	
<!-- mettre dans les fichier css le code de style ci-dessou-->
<style>
	
table, tr, td{

	border: 1px solid;
	text-align: center;
	padding: 1;


}

.add{

	height: 50%;
	width: 100%;



}

.read{

	height: 50%;
	width: 100%;
}

.update{

	height: 50%;
	width: 100%;

}

.delete{

	height: 50%;
	width: 100%;


}



.code{
	width: 30%;
	border: 1px solid ;
	text-align: center;
}

.code1{
	width: 16%;
	border: 1px solid ;
	text-align: center;
}


.code2{
	width: 100%;
	border: 1px solid ;
	text-align: center;
}


</style>
<body>

	<article>
		<h1> Spécifications techniques</h1>

		<h2>1. Contexte </h2>
			<p>Le site web est developper from scratch en php 7 coté serveur, avec bootstrap et jquery coté client </p>

		<hr>

		<h2>2. Description générale</h2>

			<h3>2.1 <em>Arborescence</em></h3>

			<div class="logo">
				<img src="img/arborescence.png">
			</div>

			<h3>2.2. <em>Rubriquage et workflow</em> <span>Tec 1.0 voir Req 1.0</span></h3>
			<p>Table des correspondances fonctionnels et techniques</p>
			<center>
			<table class="table-bordered">
			    <thead>
			      <tr>
			        <th>Req</th>
			        <th>Fonctions</th>
			        <th>Tec</th>
			      </tr>
			    </thead>
			    <tbody>
			      <tr>
			        <td> 1.1</td>
			        <td>Ajouter une publication </td>
			        <td> 1.1</td>
			      </tr>
			      <tr>
			        <td>1.2</td>
			        <td>Sélectionner une publication</td>
			        <td>1.2</td>
			      </tr>
			      <tr>
			        <td>1.3</td>
			        <td>Modifier une publication</td>
			        <td>1.3</td>
			      </tr>
			       <tr>
			        <td>1.4</td>
			        <td>Supprimer une publication</td>
			        <td>1.4</td>
			      </tr>
			      <tr>
			        <td>2.1</td>
			        <td>Se connecter</td>
			        <td>2.1</td>
			      </tr>
			      <tr>
			        <td>2.2</td>
			        <td>Se reconnecter</td>
			        <td>2.2</td>
			      </tr>
			      <tr>
			        <td>2.3</td>
			        <td>Se deconnecter</td>
			        <td>2.3</td>
			      </tr>
			      

			    </tbody>
			  </table>
			</center>

			<div class="logo size">
				<p>Les sections au format HTML sont appelées dans des inclusions en php, chaques parties du site se trouve dans une inclusions ou un fichier unique tel que les fichiers suivant: login.php, register.php, logout.php, les fonctionnalitées sont rangées par classes .</p>
				
			</div>
		<hr>

		<h2>3. Fonctions de service</h2> 

			<h3>3.1 <em> Ajouter une publication</em> <span>Tec 1.1 voir Req 1.1</span></h3>

			<p>La fonctionnalité d'ajout s'effectue via un CRUD implementé pour le projet, par la fonction <div class="code1">addArticle()"</div> qui est appellé par la classe <div class="code1">"Auth.php"</div> </p>
			<p>Une fois la fonction déclanchée, la commande SQL suivante est alors exécutée :</p>
			<div class="code2">"INSERT INTO members_posts ($category=?, $title=?, $description, $content=?, $day=?) WHERE user_id='.user_id,[$user_id])->fetch();"</div>				
			<p> Le contenu est alors ajouté dans la base de données en reçevant un ID généré automatiquement, qui est de type <em>"integer"</em>.</p>
			<img class="add" src="img/add.png">
			  
			<p> Les champs contenus dans la table <strong>members_post</strong> peuvent être remplit dans la base de données tel que : </p>

				<table class="table-bordered">
			    <thead>
			      <tr>
			        <th>Champs</th>
			        <th>Type</th>
			        <th>Usage</th>
			      </tr>
			    </thead>
			    <tbody>
			      <tr>
			        <td>"Category"</td>
			        <td>varchar(255)</td>
			        <td>Le champ définit le nom de la categorie et est obligatoire</td>
			      </tr>
			      <tr>
			        <td>"Title"</td>
			        <td>varchar(255)</td>
			        <td>Permet d'entrer un titre de la publication</td>
			      </tr>
			      <tr>
			        <td>"Description"</td>
			        <td>varchar(255)</td>
			        <td>La description de la publication doit être saisie pour être ajoutée à la base de données</td>
			      </tr>
			       <tr>
			        <td>"Content"</td>
			        <td>varchar(255)</td>
			        <td> Permet d'entrer le contenu de la publication, la saisie du contenu doit etre rediger pour etre ajouté a la base de données. </td>
			      </tr>
			      <tr>
			        <td>"Day"</td>
			        <td>datetime</td>
			        <td>la fonction datetime() en php est utiliser pour calculer la date de la publication</td>
			      </tr>
			      
			    </tbody>
			  </table>


			

		<h3>3.2 <em> Sélectionner une publication</em> <span>Tec 1.2 voir Req 1.2</span></h3>
				

				<p>Lorsque <strong>l'utilisateur</strong>accede a la page du social wall, apres s'etre identifié, les publications seront afficher grace a </p>  
				
				<p> la requete suivante:<div class="code1">"SelectArticle()"</div> </p>
				<p>qui executera la commandes sql suivante :</p>
				<div class="code">'SELECT * FROM members_posts ORDER BY day DESC'</div>
				<img class="add" src="img/read_article.png">
				<p>qui selectionne les champs correspondants dans la base de données :</p>


			
<table class="table-bordered">
			    <thead>
			      <tr>
			        <th>Champs</th>
			        <th>Type</th>
			        <th>Usage</th>
			      </tr>
			    </thead>
			    <tbody>
			      <tr>
			        <td>"Category"</td>
			        <td>varchar(255)</td>
			        <td>Le champ définit le nom de la categorie et est obligatoire</td>
			      </tr>
			      <tr>
			        <td>"Title"</td>
			        <td>varchar(255)</td>
			        <td>Permet d'entrer un titre de la publication</td>
			      </tr>
			      <tr>
			        <td>"Description"</td>
			        <td>varchar(255)</td>
			        <td>La description de la publication doit être saisie pour être ajoutée à la base de données</td>
			      </tr>
			       <tr>
			        <td>"Content"</td>
			        <td>varchar(255)</td>
			        <td> Permet d'entrer le contenu de la publication, la saisie du contenu doit etre rediger pour etre ajouté a la base de données. </td>
			      </tr>
			      <tr>
			        <td>"Day"</td>
			        <td>datetime</td>
			        <td>la fonction datetime() en php est utiliser pour calculer la date de la publication</td>
			      </tr>
			      
			    </tbody>
			  </table>
			
			

		<h3>3.3 <em> Modifier un article tec 1.3 voir req 1.3</em></h3>

				<p><strong>L'utilisateur</strong> aura la possibilité de modifier une publication dans la base de données en cliquant sur l'icône 
				<!--CHANGER L'IMAGE -->	
				<img src="img/modif.png"> via le Menu contextuel,</p>


				<p>La fonction</p><div class="code1">"Modifyarticle()"</div><p> est alors appelé</p> 
				<p>On effectue alors la fonction </p>
				<p><div class="code">"SelectArticle()"</div></p>
			
				<p>qui sélectionne les champs correspondants dans la base de données.</p>

				<p>puis la fonction</p>
				<div class="code2">'UPDATE members_posts SET  category=?, title=?, description=?, content=?, day=? WHERE users_id =?'</div>	
				<!-- TODO changer l'image-->
				<img class="add" src="img/update.png">
				<p>qui modifie les champs correspondants dans la base de données.</p>
			

			<h3>3.4 <em>Supprimer une publication Tec 1.4 voir Req 1.4</em></h3>

				<p><strong>L'utilistateur</strong> aura la possibilité de supprimer un publication dans la base de données en cliquant sur l'icône <img src="img/supp.png"> via le menu contextuel.</p>

				<p> La fonction <div class="code1">"DeleteArticle()"</div> déclanchera la fonction suivante: </p>	
				<div class="code">"SelectArticle()"</div>


				<p> Puis La commande SQL suivante sera alors executée:</p>
				<div class="code">"DELETE * FROM members_posts WHERE id='.$id,
                [$user_id])->fetch()"</div>

                <img class="add" src="img/delete.png">
				
					
			
------FIN PUBLICATION-------

				

			<h3>4.4<em> Se connecter Tec 2.1 voir Req 2.1</em></h3>					
				<p><strong>L'utilisateur</strong> saisit les champs pour la connexion</p> 
				 la fonction suivante se déclanchera: </p>
				<div class="code">"login()"</div>
				<p>La commande SQL suivante sera alors executée:</p>
				<div class="code2">"SELECT username FROM users WHERE username='$username' AND password='$password'"</div>
				<p>puis pour modifier l'identifiant du token de connexion :</p>
				<div class="code2">"UPDATE users SET token=:token WHERE username=:username AND password=:password"</div>

				<img class="add" src="img/login.png">

			<h3>4.5<em> Reconnexion Tec 2.2 voir Req 2.2</em></h3>
			<p><strong>L'utilisateur</strong> pourra fermer la fenêtre sans se déconnecter puis la réouvrir et retrouver sa connection, si l'utilisateur ne s'est pas déconnecté alors :</p>
			<p>la fonction suivante déclanchera: </p>
			<div class="code">"check_token()"</div>
			<p>La commande SQL suivante sera alors executée:</p>
			<div class="code2">"SELECT * FROM users WHERE token='$token'"</div>
			<p> et vérifiera l'identifiant de connexion dans la base de données </p>
			<img class="add" src="img/check_token.png">

			<h3>4.6<em> Déconnexion Tec 2.3 voir Req 2.3</em></h3>
			<p><strong>L'utilisateur</strong> pourra se déconnecter en cliquant sur le bouton prévu à cet effet:</p>
			déclanchera la fonction suivante: </p>
			<div class="code">"logout()"</div>
			<p>La commande SQL suivante sera alors executée:</p>
			<div class="code2">"UPDATE users SET token='LOGGED OUT' WHERE token=$token"</div>
			<p>Pour réinitialiser la valeur du token à "logged out" </p>
			


		<hr>



		<h2>4. Contraintes</h2>

			<h3>4.1 <em>Techniques</em></h3>

			<p>Les téchnologies utilisées pour le développement sont :</p>

			<ul>
				<li>Linux</li>
				<li>PHP 7</li>
				<li>MySQL</li>
				<li>Boostrap</li>
				<li>jQuery</li>
			</ul>

			
			<h3>4.2 <em>Temporelles</em></h3>

			<!--TODO mettre les contraintre temporelle -->

			<h3>4.3 <em>Graphiques</em></h3>

			<!--TODO mettre la chartes graphique -->

		<hr>

		<h2>5. Description des données</h2>

			<p>Ceci est la représentation de la base de données.</p>

			<h3>5.1 <em>Unified Modeling Language (UML)</em></h3>

			<div class="logo size">
			<!-- faire l'uml -->
				<!-- <img src="img/2techUml.png"> -->
			</div>

			<h3>5.2 <em>Business Process Modeling Language (BPML)</em></h3>
			<!-- faire le bpml --> 
			<div class="logo size">
				<!-- <img src="img/Bpmn1.1.png"> -->
			</div>

	</article>

</body>
</html>
